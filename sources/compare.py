#!/usr/bin/env python3
import matplotlib.pyplot as plt

p = [i for i in range(3,17)]
a = [[0.00165, 0.00207, 0.00238, 0.00341],
[0.00473, 0.00185, 0.00557, 0.00347],
[0.01433, 0.00705, 0.00447, 0.00574],
[0.01435, 0.02027, 0.00933, 0.01871],
[0.03279, 0.03307, 0.04073, 0.03388],
[0.07179, 0.08876, 0.04747, 0.0655],
[0.09186, 0.15232, 0.0655, 0.13683],
[0.36153, 0.29587, 0.23915, 0.3528],
[1.0122, 0.99793, 1.14724, 0.73797],
[1.87988, 1.71761, 2.38277, 1.80439],
[4.60801, 4.89918, 4.4826, 5.57267],
[11.07779, 6.48839, 9.18086, 9.05675],
[17.94169, 24.75508, 27.36494, 27.31568],
[41.95163, 45.65852, 70.80786, 70.95171]]


b = [[0.00253, 0.00215, 0.00276, 0.00314],
[0.00343, 0.00282, 0.00352, 0.00247],
[0.00288, 0.00439, 0.00414, 0.00356],
[0.00507, 0.00475, 0.00595, 0.0046],
[0.01078, 0.01139, 0.01336, 0.01108],
[0.01848, 0.01487, 0.01986, 0.01882],
[0.02067, 0.03517, 0.07246, 0.04414],
[0.09956, 0.09638, 0.08625, 0.10446],
[0.20643, 0.16282, 0.11565, 0.09066],
[0.36182, 0.40554, 0.30368, 0.44133],
[0.97221, 1.01574, 0.76716, 1.06465],
[2.23604, 1.92885, 1.94133, 2.41999],
[3.8839, 4.52734, 7.02415, 3.23438],
[11.72778, 12.39318, 7.12883, 12.06618]]

def main() -> None:
    average_a = [sum(row)/len(row) for row in a]
    average_b = [sum(row)/len(row) for row in b]

    print("| {:<3} | {:<10} | {:<10} |".format('p', 'average', 'average T'))
    print("+" + "-"*5 + "+" + "-"*12 + "+" + "-"*12 + "+")
    for i in range(len(p)):
        print("| {:<3} | {:<10.5f} | {:<10.5f} |".format(p[i], average_a[i], average_b[i]))

    plt.plot(p, average_a, label='Average ')
    plt.plot(p, average_b, label='Average Threading')
    plt.yscale('log')
    plt.xlabel('p')
    plt.ylabel('Average')
    plt.title('Average with and without Threading against p')
    plt.legend()
    plt.show()

if __name__ == "__main__":
    main()
